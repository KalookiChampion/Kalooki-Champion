<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>KALOOKI CHAMPION - Table</title>
  <link rel="icon" type="image/png" href="cards-jamaican/105_JOKER.png">

  <!-- MAIN TABLE LAYOUT CSS (relative paths from /public) -->
  <link rel="stylesheet" href="css/table.css">
</head>
<body>
  <div id="table-root">
    <!-- Seat labels -->
    <div id="seat-top" class="seat-area">
      <div class="seat-label" id="label-top">Bot 1</div>
    </div>
    <div id="seat-bottom" class="seat-area">
      <div class="seat-label" id="label-bottom">YOU</div>
    </div>
    <div id="seat-left" class="seat-area">
      <div class="seat-label" id="label-left">Bot 2</div>
    </div>
    <div id="seat-right" class="seat-area">
      <div class="seat-label" id="label-right">Bot 3</div>
    </div>

    <!-- ================== MAIN TABLE ================== -->
    <div id="table-layout">
      <!-- Top row: Bot 1 hand and set box -->
      <div id="top-row" class="table-row">
        <div id="bot1-hand-container" class="hand-area hand-top">
          <div class="hand-label">Bot 1 Hand</div>
          <div id="bot1-hand" class="hand-row hand-row-top"></div>
        </div>
        <div id="bot1-set-container" class="set-area set-top">
          <div class="set-label">Bot 1 Sets</div>
          <div id="bot1-set-box" class="set-box"></div>
        </div>
      </div>

      <!-- Middle row: Left bot, center deck/pack, right bot -->
      <div id="middle-row" class="table-row">
        <!-- Bot 2 (left) -->
        <div id="bot2-area" class="side-area side-left">
          <div class="side-label">Bot 2</div>
          <div id="bot2-hand" class="hand-col"></div>
          <div id="bot2-set-box" class="set-box-vert"></div>
        </div>

        <!-- Center area: deck, pack, info -->
        <div id="center-area">
          <div id="center-top-row">
            <div id="turn-indicator" class="turn-indicator">
              <div id="currentPlayerName">Waiting...</div>
            </div>
          </div>
          <div id="center-middle-row">
            <div id="deck-container">
              <div class="deck-label">DECK</div>
              <div id="deck" class="deck-stack"></div>
            </div>
            <div id="pack-container">
              <div class="deck-label">PACK</div>
              <div id="pack" class="deck-stack"></div>
            </div>
          </div>
          <div id="center-bottom-row">
            <div id="info-banner" class="info-banner">Welcome to Kalooki Champion.</div>
          </div>
        </div>

        <!-- Bot 3 (right) -->
        <div id="bot3-area" class="side-area side-right">
          <div class="side-label">Bot 3</div>
          <div id="bot3-hand" class="hand-col"></div>
          <div id="bot3-set-box" class="set-box-vert"></div>
        </div>
      </div>

      <!-- Bottom row: Player 1 hand and set box -->
      <div id="bottom-row" class="table-row">
        <div id="player1-set-container" class="set-area set-bottom">
          <div class="set-label">Player 1 Sets</div>
          <div id="player1-set-box" class="set-box"></div>
        </div>
        <div id="player1-hand-container" class="hand-area hand-bottom">
          <div class="hand-label">Your Hand</div>
          <div id="player1-hand" class="hand-row hand-row-bottom"></div>
        </div>
      </div>
    </div>

    <!-- ================== CONTROL PANEL ================== -->
    <div id="control-panel">
      <div id="left-controls">
        <button id="startGameBtn" class="btn primary">Start Game</button>
        <button id="debugToggleBtn" class="btn secondary">Debug: OFF</button>
      </div>
      <div id="right-controls">
        <button id="endTurnBtn" class="btn primary" disabled>End Turn</button>
        <button id="sortHandBtn" class="btn secondary">Sort Hand</button>
      </div>
    </div>

    <!-- ================== STATUS BAR ================== -->
    <div id="status-bar">
      <div id="status-left">
        <span id="status-text">Waiting to start...</span>
      </div>
      <div id="status-right">
        <span id="deckCountLabel">Deck:</span>
        <span id="deckCountValue">0</span>
        <span id="packCountLabel">Pack:</span>
        <span id="packCountValue">0</span>
      </div>
    </div>

    <!-- ================== MINI-HANDS (OVERVIEW) ================== -->
    <div id="mini-hands-row">
      <div id="mini-top" class="mini-hand mini-horizontal"></div>
      <div id="mini-left" class="mini-hand mini-vertical"></div>
      <div id="mini-right" class="mini-hand mini-vertical"></div>
      <div id="mini-bottom" class="mini-hand mini-horizontal"></div>
    </div>

    <!-- ================== CHAT & MENU ================== -->
    <div id="table-sidebar">
      <div id="chat-panel">
        <div id="chat-header">
          <span>Table Chat</span>
          <button id="btnCloseChat">‚úñ</button>
        </div>
        <div id="chat-messages"></div>
        <div id="chat-input-row">
          <input type="text" id="chatInput" placeholder="Type message..." maxlength="100">
          <button id="btnSendChat">Send</button>
        </div>
      </div>

      <div id="menu-panel">
        <div id="menu-buttons">
          <button id="btnLobby" title="Back to Lobby">üè†</button>
          <button id="btnSettings" title="Settings">‚öôÔ∏è</button>
        </div>
        <button id="btnDebug" style="display:none;">Debug</button>
      </div>

      <div id="playerStatus"></div>
    </div>
    
    <!-- Settings Menu -->
    <div id="settingsOverlay" class="settings-overlay hidden">
      <div class="settings-panel">
        <div class="settings-header">
          <h2>Menu</h2>
          <button id="btnCloseSettings" class="close-btn">&times;</button>
        </div>
        <div class="settings-body">
          <div class="settings-row">
            <label for="volumeSlider">Sound Volume:</label>
            <input type="range" id="volumeSlider" min="0" max="100" value="60">
            <span id="volumeValue">60%</span>
          </div>
          <div class="settings-row">
            <label>
              <input type="checkbox" id="toggleAnimations" checked>
              Enable animations
            </label>
          </div>
          <div class="settings-row">
            <button id="btnCloseGame" class="danger">Leave Table</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Meld prompt dialog -->
    <div id="meldPromptOverlay" class="overlay hidden">
      <div class="meld-dialog">
        <h2>Confirm First Meld</h2>
        <p>Your current sets total <span id="meldTotal">0</span> points. You need at least 40 to come down.</p>
        <div class="meld-actions">
          <button id="confirmMeldBtn" class="btn primary">Confirm</button>
          <button id="cancelMeldBtn" class="btn secondary">Cancel</button>
        </div>
      </div>
    </div>

    <!-- Joker representation prompt -->
    <div id="jokerPromptOverlay" class="overlay hidden">
      <div class="joker-dialog">
        <h2>Choose Joker Representation</h2>
        <p>Select the <span id="jokerPromptContext"></span> the Joker will represent.</p>
        <div id="jokerRepOptions" class="joker-options"></div>
        <div class="joker-actions">
          <button id="jokerConfirmBtn" class="btn primary">Confirm</button>
          <button id="jokerCancelBtn" class="btn secondary">Cancel</button>
        </div>
      </div>
    </div>

    <!-- Victory overlay -->
    <div id="victoryOverlay" class="overlay hidden">
      <div class="victory-dialog">
        <div id="victoryPlayerName" class="victory-title">Player 1</div>
        <div class="victory-header">WINS!</div>
        <div class="victory-stars">&#11088; &#11088; &#11088; &#11088; &#11088;</div>
        <div id="victoryMessage" class="victory-message">Congratulations on your victory!</div>
        <button id="victoryPlayAgain" class="victory-btn">Play Again</button>
        <div class="victory-footer">You are the Kalooki Champion!</div>
      </div>
    </div>
  </div>

  <!-- Socket.io for multiplayer -->
  <script src="/socket.io/socket.io.js"></script>
  <!-- Main table logic (relative path) -->
  <script src="js/kaloki-table.js"></script>
  <!-- Preload card images to smooth multiplayer animations -->
  <script src="js/preload-cards.js"></script>
</body>
</html>
